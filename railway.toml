# ==============================================================================
# Tabrela - Railway Configuration
# ==============================================================================
# This file configures how Railway deploys the backend services.
# 
# Railway will build using the root Dockerfile which includes:
# - Auth service (port 8081) - primary service, handles health checks
# - Attendance service (port 8082)
# - Merit service (port 8083)
# - Tabulation service (port 8084)
# - Email service (port 5000) - internal only
#
# IMPORTANT: 
# 1. Set PORT=8081 in Railway environment variables
# 2. Set RAILWAY_SERVICE_NAME in GitHub Secrets to match your Railway service name
#    (Go to Railway Dashboard → Click on your service → The name shown at the top)
# ==============================================================================

[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
# Health check configuration
# Railway sends requests to healthcheckPath on the PORT (should be 8081)
# The auth service implements GET /health returning 200 OK
healthcheckPath = "/health"
healthcheckTimeout = 30
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
