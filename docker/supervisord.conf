[supervisord]
nodaemon=true
user=root
logfile=/var/log/tabrela/supervisord.log
pidfile=/var/run/supervisord.pid
loglevel=info

[program:auth]
command=/app/bin/auth
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/tabrela/auth.err.log
stdout_logfile=/var/log/tabrela/auth.out.log
user=appuser
environment=RUST_LOG="info"

[program:attendance]
command=/app/bin/attendance
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/tabrela/attendance.err.log
stdout_logfile=/var/log/tabrela/attendance.out.log
user=appuser
environment=RUST_LOG="info"

[program:merit]
command=/app/bin/merit
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/tabrela/merit.err.log
stdout_logfile=/var/log/tabrela/merit.out.log
user=appuser
environment=RUST_LOG="info"

[program:email]
command=python3 -m gunicorn --bind 0.0.0.0:5000 --workers 2 --timeout 120 app:app
directory=/app/email
autostart=true
autorestart=true
stderr_logfile=/var/log/tabrela/email.err.log
stdout_logfile=/var/log/tabrela/email.out.log
user=appuser
environment=PYTHONPATH="/usr/local/lib/python3.11/dist-packages"
